<!DOCTYPE HTML>
<!--
	TXT by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>LLVM Compiler</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header">
					<div class="logo container">
						<div>
							<h1><a href="index.html" id="logo">LLVM Compiler</a></h1>
							
						</div>
					</div>
				</header>

			<!-- Navbar -->
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li>
							<a href="#">Projects</a>
							<ul>
								<li><a href="Caches.html">Cache simulator</a></li>
								<li><a href="MipsSimulator.html">MIPS CPU simulator</a></li>
                                 <li class="current"><a href="llvmCompiler.html">LLVM Compiler</a></li>
                                <li><a href="Robotics.html">Robotics Group Project</a></li>
								
								
							</ul>
						</li>
                        
						<li><a href="AboutMe.html">About</a></li>
                        <li><a href="CV.pdf">Resume</a></li>
						
					</ul>
				</nav>

				

			<!-- Main -->
				<div id="main-wrapper">
					<div id="main" class="container">
						<div class="row">
							<div class="3u 12u(mobile)">
								<div class="sidebar">

									<!-- Sidebar -->

										<!--Useful links -->
											<section>
												<h2 class="major"><span>Useful links</span></h2>
												<ul class="divided">
													<li>
														<article class="box post-summary">
															<h3>A Good Overview</h3>
															<ul class="meta">
																<a href="http://llvm.org/docs/" style="text-decoration:none">Overview</a>
                                                               
															</ul>
                                                            <br>
                                                            <ul class="meta">
                                                                 <a href="http://llvm.org/docs/" style="text-decoration:none">Getting Started</a>
                                                            </ul>
														</article>
													</li>
                                                    
													<li>
														<article class="box post-summary">
															<h3>Learning Resources</h3>
                                                            <ul class="meta">
                                                              
																<a href="http://llvm.org/docs/tutorial/index.html" style="text-decoration:none">Tutorials</a>
															</ul>
                                                              <br>
															<ul class="meta">
                                                              
																<a href="http://nptel.ac.in/courses/106108052/6" style="text-decoration:none">Compiler Design</a>
															</ul>
														</article>
													</li>
													
												</ul>
												<h2 class="major"><span></span></h2>
											</section>

										

										

								</div>
							</div>
							<div class="9u 12u(mobile) important(mobile)">
								<div class="content content-right">

									<!-- Content -->

										<article class="box page-content">

											<header>
												<h2> Compilers!</h2>
												
												<ul class="meta">
													<li class="icon fa-clock-o">April-June 2017</li>
													
												</ul>
											</header>

											<section>
												<span class="image featured"><img src="images/llvmCompiler.png" alt="" /></span>
												
											</section>

											<section>
												<h3>Overview</h3>
												<p>
                                                    As part of my internship at ARM, I workded on the LLVM Compiler toolchain.
                                                </p>
                                                <p>
												    A key part of automating the process of verification of ARMs Architecture Specification is the use of a form of mechanical translation of ARM’s Architecture to an executable binary, C++ and Verilog models for formal verification.The AIG department in ARM has various tools that work on the Architecure specification language(ASL) to achieve these goals. 
                                                </p>
                                                <p>
                                                    The LLVM Compiler toolchain was chosen as a possible candidate for replacing the existing tools.It's an open source tool and there is excellent documentation available online for beginners.
                                                </p>
                                                
                                                <h5> Motivation</h5>
                                                <p> 
                                                    Currently ARM tools handle different tasks such as interpreting the ASL, generating C++ and Verilog. They have a significantly high build time, and hence will be difficult to scale as the volume of the architecture specification increases in the upcoming versions. 
                                                    <br><br>
                                                    All of this leads to the need of a well-documented tool that may serve as a common interface for all existing tools, and may be used for the same use cases as the existing tools. The LLVM Project meets these requirements and consists of modular and reusable compiler technologies. 
												    
												</p>
                                                
                                                <h5> Goal </h5>
                                                <p> 
                                                    The end goal of the project was to create a llvm-based compiler for supporting the existing use-cases of the current tools. 
												    
												</p>
											
                                                
											</section>
                                            
                                           
                                            
                                            <section>
												<h3>Task 1- Lexer + Parser + AST design </h3>
                                                <h5>a) Designed a Lexer using Flex tool -</h5>
                                                
                                                <h6> Background</h6>
                                                <p>
                                                     Flex is a Lexer generator tool and caters to tokenizing the input source program. It uses a Type-3 grammar implementation, or more concretely,regular expressions (regex) specification file as the input.
                                                </p>
                                                <h6>Procedure</h6>
												<p>
												   This process involved creating regular expressions for specifying patters for tokens like identifiers, integer, hexadecimal and floating point constants, keywords and operators in the input source ASL.
												</p>
                                                
                                                
                                                <h5>B) Designed a Parser using YACC Bison tool –</h5>
                                                
                                                <h6> Background</h6>
                                                <p>
                                                     YACC Bison is a bottom-up Parser generator tool and is used to express the structure of languages with a Context Free Grammar using Backus Naur Form (BNF) grammar.It is used for checking syntax of the input program. 
                                                </p>
                                                <p>
                                                    Bison generates a bottom-up LR(1) Parser that uses shift-reduce parsing , as opposed to the more intuitive top-down Parser. The Parser uses a lookahead of 1 token to decide whether to shift or reduce. The term “shift-reduce” is used to refer to the usage of a parser stack, containing the already parsed tokens , and when a new lookahead token is seen , if the topmost symbol in the parser stack and the token can be converted or reduced partially or completely to a grammar rule , then it is shifted otherwise the topmost symbol on the stack is reduced.
                                                </p>
                                                <h6>Procedure</h6>
												<p>
												   The first stage is modifying the Lexer to return tokens when the yylex() function is called. This is known as “Pull” mode of the Parser , since it pulls the tokens from the Lexer. The next step is deciding what semantic value the recognized tokens must have. For example, when an integer is tokenized in the input, the Lexer just tokenizes it as a C string , but does not assign a type or a value to it. It is upto the programmer to decide what type may be assigned to the recognized token on the Lexer end. These tokens and their types need to be declared in a header file and included as a header in the Parser and Lexer specification files. The final stage involves writing grammar productions in Backus Naur Form.At this stage, it is important to decide what type of object must be parsed by the Parser. It is handled by a C union declaration in the Parser file and this is a similar problem to deciding the semantic value of tokens as explained above. The types in the Union declaration are determined by the AST constructs and the remaining procedure is explained below.
												</p>
												
                                                
                                                <h5>C) Designing an Abstract Syntax Tree</h5>
                                                
                                                <h6> Background</h6>
                                                <p>
                                                     An Abstract Syntax tree is a form of syntactic representation of the input source and is dependent on the source language. It is known as a Syntax tree as it uniquely determines a structure for unambiguous grammars. It is known known as “abstract”, since in contrast to a Parse Tree it does not represent every detail of the syntax. For example, it may ignore parenthesis, or semi-colons, if the input language has any. The method of constructing the AST by attaching action rules, that build the AST nodes, to productions in the grammar is known as Syntax Directed Translation (SDT). It is extremely useful for carrying out optimization passes.
                                                </p>
                                                <h6>Procedure</h6>
												<p>
												   This is a slightly more involved process than the earlier two.This stage involves declaring C++ classes for most productions in the BNF grammar, and once the production is parsed, Bison returns a pointer to the object that parsed. The type of this object is determined by C++ classes declared in the AST header file
												</p>
												
                                                <p>
                                                    An example of an AST Node class will be FunctionProtoTypeAST that represents a Function prototype or declaration with external linkage. It’s member data consists of the Function name as a string, parameter names as a vector of strings, parameter Types as a vector of LLVM Type and the return types as a vector of LLVM Type. It consists of various public getters and setters for its member data and also contains the virtual codegen() function that is used to generate the IR.
                                                </p>
												
											</section>
                                            
                                            
                                             <section>
												<h3>Task 2 - generating Valid ir</h3>
												<p>
												    The second task was simple as it was already accounted for when the AST was designed, since the design of class structures is influenced by the LLVM IR that needs to be generated.
                                                  
                                                    This involved understanding the usage of the LLVM API which is not explained here to avoid specific details.
                                                    
												</p>
												
                                              
											</section>
                                            
                                            <section>
												<h3>Task 3 - transformations </h3>
                                                  
                                                <p>
                                                  This task was the most crucial in deciding feasibility of using the existing tool.
                                                    <br>
                                                    Due to the confidential nature of this task, details/code cannot be provided.
                                                </p>
                                
                                            </section>
                                                
											<section>
												<h3> conclusion ...</h3>
												<p>
                                                    Although the project was discontinued due to shortcomings of the API for ARMs purpose, I
													enjoyed the project as it was my first experience of using the LLVM API and also gained some exposure to the SSA form.I also learnt more about the ARM specification language and how it describes the architecture.  
												</p>
												
											</section>

										</article>

								</div>
							</div>
						</div>
						<div class="row 200%">
							<div class="12u">

                                
                                
                                <!-- Features -->
									<section class="box features">
										<h2 class="major"><span>Other Projects</span></h2>
										<div>
											<div class="row">
												<div class="4u 12u(mobile)">

													<!-- Feature -->
														<section class="box feature">
															<a href="Caches.html" class="image featured"><img src="images/caches.png" alt="" /></a>
															<h3><a href="https://github.com/malharjajoo/caches_assignment">Write-Back Cache Simulator</a></h3>
															<p>
												                Built a write-back cache simulator with LRU replacement policy  in C++.
															</p>
                                                            <p>
                                                                See <a href="https://github.com/malharjajoo/caches_assignment"> github code</a> directly.
                                                            </p>
														</section>

												</div>
												<div class="4u 12u(mobile)">

													<!-- Feature -->
														<section class="box feature">
															<a href="MipsSimulator.html" class="image featured"><img src="images/mips.png" alt="" /></a>
															<h3><a href="#"> MIPS CPU simulator</a></h3>
															<p>
																Built a CPU simulator and testbench for the  MIPS I instruction set. 
															</p>
                                                            
                                                             <p>
                                                                See <a href="https://github.com/malharjajoo/mips_simulator_testbench"> github code</a> directly.
                                                            </p>
                                                            
														</section>

												</div>
												<div class="4u 12u(mobile)">

													<!-- Feature -->
														<section class="box feature">
															<a href="#" class="image featured"><img src="images/caterpi(e).jpg" alt="" /></a>
															<h3><a href="https://github.com/malharjajoo/Robotics"> Robotics </a></h3>
															<p>
																Built a Robot using Lego Mindstorms NXT and a Raspberry Pi.  
															</p>
                                                            
                                                             <p>
                                                                See <a href="https://github.com/malharjajoo/Robotics"> github code</a> directly.
                                                            </p>
														</section>

												</div>
												
											</div>
											
										</div>
									</section>
                                
                                
								<!-- Features -->
									

							</div>
						</div>
					</div>
				</div>

			<!-- Footer -->
				<footer id="footer" class="container">
					
                   
					<div class="row 200%">
						<div class="12u">
                            <h2 class="major"><span>Contact </span></h2>
							<!-- Contact -->
                        
								<section>
									<p> Please feel free to Contact me on either of the below</p>
									<ul class="contact">
										<li><a class="icon fa-facebook" href="https://www.facebook.com/profile.php?id=100008377770441"><span class="label">Facebook</span></a></li>
                                        
										<li><a class="icon fa-linkedin" href="https://www.linkedin.com/in/malhar-jajoo-2b9105b5/"><span class="label">Linkedin</span></a></li>
										
										<li><a class="icon fa-google-plus" href="#"><span class="label">Google+</span></a></li>
									</ul>
								</section>

						</div>
					</div>

				</footer>


		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>